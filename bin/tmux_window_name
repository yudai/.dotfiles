#!/bin/bash

window_index=$1
window_name=$2
first_command=$3
command=$4
pane_title=$5
pane_index=$6
path=$7

bg_color=

if [ "${pane_title:0:1}" = "[" ]; then
    cmd="$(echo ${pane_title} | cut -d '@' -f 1)"
    host="$(echo ${pane_title} | cut -d '@' -f 2)"
    nice_command="${cmd}"

    if [ "${cmd}" != "${host}" -a "${host}" != "$(hostname)" ]; then
        nice_command="${nice_command}@${host}"
    fi

    flag="$(echo ${cmd} | cut -d ']' -f 2)"
    if [ "${flag:0:1}" = "!" ]; then
        bg_color=blue
    fi

else
    nice_command="${pane_title}"
fi

if [ "${window_name}" != "zsh" ]; then
    nice_command="${window_name}"
fi

nice_window_index="#[bg=${bg_color}][${window_index}]"

echo -ne "${nice_window_index}${nice_command}"
